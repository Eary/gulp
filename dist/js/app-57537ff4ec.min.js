var gulp=require("gulp"),csso=require("gulp-csso"),jshint=require("gulp-jshint"),uglify=require("gulp-uglify"),concat=require("gulp-concat"),clean=require("gulp-clean"),rename=require("gulp-rename"),rev=require("gulp-rev"),revCollector=require("gulp-rev-collector"),browserSync=require("browser-sync"),autoprefixer=require("gulp-autoprefixer"),breload=browserSync.reload,basePath="./dist",distPath=basePath,srcPath="./src",revPath="./rev/**/*.json";gulp.task("clean",function(){return gulp.src(basePath,{read:!1}).pipe(clean())}),gulp.task("css",function(){return gulp.src(srcPath+"/**/*.css").pipe(autoprefixer({browsers:["last 2 version","ie 8","ie 9"]})).pipe(csso()).pipe(rename({suffix:".min"})).pipe(rev()).pipe(gulp.dest(distPath)).pipe(rev.manifest()).pipe(gulp.dest("./rev/css"))}),gulp.task("js",function(){return gulp.src(srcPath+"/**/*.js").pipe(jshint()).pipe(jshint.reporter("default")).pipe(rename({suffix:".min"})).pipe(uglify()).pipe(rev()).pipe(gulp.dest(distPath)).pipe(rev.manifest()).pipe(gulp.dest("./rev/js"))}),gulp.task("rev",function(){return gulp.src([revPath,srcPath+"/**/*.html"]).pipe(revCollector({replaceReved:!0})).pipe(gulp.dest(distPath))}),gulp.task("test",function(){console.log("Tt works!")}),gulp.task("s",function(){browserSync({files:"**",server:{baseDir:basePath}})}),gulp.task("default",["server"]),gulp.task("server",["css","js"],function(){browserSync({files:"**",server:{baseDir:basePath}})}),gulp.task("reload",function(){breload()});